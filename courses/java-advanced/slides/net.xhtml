<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="ru" xml:lang="ru" xmlns="http://www.w3.org/1999/xhtml"><head><title>Технологии Java / Работа с сетью</title><meta name="author" content="" /><link rel="stylesheet" type="text/css" media="screen, projection, print" href="scripts/slidy.css" /><link rel="stylesheet" type="text/css" href="scripts/prettify.css" /><link rel="stylesheet" type="text/css" href="scripts/kgeorgiy-slides.css" /><script type="text/javascript" src="scripts/slidy.js" charset="utf-8" /><script type="text/javascript" src="scripts/kgeorgiy-slides.js" charset="utf-8" /><script type="text/javascript" src="scripts/prettify.js" /><script type="text/javascript" src="scripts/lang-sql.js" /><script type="text/javascript" src="scripts/lang-javaModule.js" /><script type="text/javascript" src="scripts/lang-scala.js" /><script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-37693764-1"]);_gaq.push(["_setDomainName","kgeorgiy.info"]);_gaq.push(["_trackPageview"]);(function(){var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8EQ66D87ZZ" /><script>
                  window.dataLayer = window.dataLayer || [];
                  function gtag(){dataLayer.push(arguments);}
                  gtag('js', new Date());

                  gtag('config', 'G-8EQ66D87ZZ');
                </script></head><body onload="prettyPrint()"><div id="all">
<div class="slide cover"><div class="content"><div class="course">Технологии Java</div><hr /><div class="lecture"><div>Работа с сетью</div></div><div class="link"><a href="https://kgeorgiy.info/courses/java-advanced/">https://kgeorgiy.info/courses/java-advanced/</a></div><div class="copyright"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.ru"><span class="copyright">Copyright © Georgiy Korneev</span><img src="scripts/by-nc-sa.png" alt="Attribution-NonCommercial-ShareAlike" /></a></div></div></div>
<div class="slide section"><div class="content"><h1>Введение</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc current">Введение</a><ol class="level-2 toc-2"><li><a href="#(3)" class="">Пример</a></li><li><a href="#(11)" class="">Стек протоколов</a></li></ol></li><li><a href="#(16)" class="toc">Адреса</a></li><li><a href="#(22)" class="toc">Работа с TCP</a></li><li><a href="#(30)" class="toc">Работа с UDP</a></li><li><a href="#(36)" class="toc">URI и URL</a></li><li><a href="#(43)" class="toc">Соединения</a></li><li><a href="#(47)" class="toc">Работа с HTTP</a></li><li><a href="#(59)" class="toc">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">2</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Пример</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc current">Введение</a><ol class="level-2 toc-2"><li><a href="#(3)" class=" current">Пример</a></li><li><a href="#(11)" class="">Стек протоколов</a></li></ol></li><li><a href="#(16)" class="toc">Адреса</a></li><li><a href="#(22)" class="toc">Работа с TCP</a></li><li><a href="#(30)" class="toc">Работа с UDP</a></li><li><a href="#(36)" class="toc">URI и URL</a></li><li><a href="#(43)" class="toc">Соединения</a></li><li><a href="#(47)" class="toc">Работа с HTTP</a></li><li><a href="#(59)" class="toc">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">3</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Загрузка страницы </h1><div class="body"><div class="img-width"><img class="width" style="width: 100%" src="pics/IntroAddress.svg" /></div><ul class="item-1 level-1"><li><span class="question">Что происходит, когда браузер показывает страницу?</span><ul class="item-2 level-2"><li class="incremental"><div class="non-incremental">Определение IP‑адреса (<var>DNS</var>)</div></li><li class="incremental"><div class="non-incremental">Загрузка страницы (<var>HTTP</var>[<var>S</var>])</div></li><li class="incremental"><div class="non-incremental">Отображение страницы (<var>HTML</var>)</div></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">4</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Как работает DNS (1)</h1><div class="body"><ul class="item-1 level-1"><li><span class="question">У кого узнаем IP‑адрес <var>www.kgeorgiy.info</var>?</span><ul class="item-2 level-2"><li class="incremental"><div class="non-incremental">У локального DNS‑сервера</div></li></ul></li><li class="incremental"><div class="non-incremental"><span class="question">Откуда локальный сервер знает IP‑адрес <var>www.kgeorgiy.info</var>?</span><ul class="item-2 level-2"><li class="incremental"><div class="non-incremental">Спрашивает у вышестоящего DNS‑сервера</div></li><li class="incremental"><div class="non-incremental">Кеширует ответ</div></li></ul></div></li><li class="incremental"><div class="non-incremental"><span class="question">Откуда вышестоящий сервер знает IP‑адрес <var>www.kgeorgiy.info</var>?</span><ul class="item-2 level-2"><li class="incremental"><div class="non-incremental">Спросить у ответственного (авторитетного) DNS‑сервера</div></li></ul></div></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">5</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Как работает DNS (2)</h1><div class="body"><ul class="item-1 level-1"><li>Как узнать IP‑адрес <var>www.kgeorgiy.info</var>?<ul class="item-2 level-2"><li class="incremental"><div class="non-incremental">Взять адрес корневого DNS‑сервера из списка</div></li><li class="incremental"><div class="non-incremental">Спросить у корневого DNS‑сервера, кто отвечает за <var>info.</var>?</div></li><li class="incremental"><div class="non-incremental">Спросить у ответственного за <var>info.</var>, кто отвечает за <var>kgeorgiy.info.</var>?</div></li><li class="incremental"><div class="non-incremental">Спросить у ответственного за <var>kgeorgiy.info.</var> адрес <var>www.kgeorgiy.info.</var>?</div></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">6</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Как работает HTTP[S]</h1><div class="body"><ul class="item-1 level-1"><li>Устанавливает <var>TCP</var>-соединение<ul class="item-2 level-2"><li>По IP-адресу и номеру порта</li><li>Двусторонний поток байт</li></ul></li><li>Отсылает запрос<ul class="item-2 level-2"><li>Заголовки</li><li>Тело запроса</li></ul></li><li>Принимает ответ<ul class="item-2 level-2"><li>Заголовки</li><li>Тело ответа</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">7</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Как работает TCP</h1><div class="body"><ul class="item-1 level-1"><li>Посылает и принимает IP-пакеты<ul class="item-2 level-2"><li>Установка соединения</li><li>Передача данных</li><li>Переупорядочивание и фрагментация пакетов</li><li>Закрытие и разрывы соединений</li></ul></li><li>Базируется на IP<ul class="item-2 level-2"><li>Отдельные пакеты без гарантии доставки</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">8</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Как работает IP</h1><div class="body"><ul class="item-1 level-1"><li><span class="question">Как доставить пакет по IP-адресу?</span><ul class="item-2 level-2"><li>Прямого соединения нет</li><li>Адресов много</li><li class="incremental"><div class="non-incremental">Отправить шлюзу (по умолчанию)</div></li><li class="incremental"><div class="non-incremental">Рекурсивно</div></li></ul></li><li class="incremental"><div class="non-incremental"><em>Настоящие</em> шлюзы<ul class="item-2 level-2"><li>Таблица маршрутизации<ul class="item-3 level-3"><li>По префиксам</li></ul></li><li>Отправит шлюзу из таблицы</li></ul></div></li><li class="incremental"><div class="non-incremental">Базируется на канальном уровне<ul class="item-2 level-2"><li>Отдельные фреймы по MAC-адресам</li><li>Ethernet, Wi-Fi, Bluetooth, …</li></ul></div></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">9</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Как работает канальный уровень</h1><div class="body"><ul class="item-1 level-1"><li><span class="question">Как узнать MAC-адрес по IP-адресу?</span><ul class="item-2 level-2"><li class="incremental"><div class="non-incremental">Address Resolution Protocol</div></li></ul></li><li class="incremental"><div class="non-incremental"><span class="question">Как доставить фрейм по MAC-адресу?</span><ul class="item-2 level-2"><li class="incremental"><div class="non-incremental">Передать всем (хаб)</div></li><li class="incremental"><div class="non-incremental">Передать в нужный порт (свитч)</div></li></ul></div></li><li class="incremental"><div class="non-incremental">Базируется на физическом уровне<ul class="item-2 level-2"><li>Электромагнитные сигналы</li></ul></div></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">10</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Стек протоколов</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc current">Введение</a><ol class="level-2 toc-2"><li><a href="#(3)" class="">Пример</a></li><li><a href="#(11)" class=" current">Стек протоколов</a></li></ol></li><li><a href="#(16)" class="toc">Адреса</a></li><li><a href="#(22)" class="toc">Работа с TCP</a></li><li><a href="#(30)" class="toc">Работа с UDP</a></li><li><a href="#(36)" class="toc">URI и URL</a></li><li><a href="#(43)" class="toc">Соединения</a></li><li><a href="#(47)" class="toc">Работа с HTTP</a></li><li><a href="#(59)" class="toc">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">11</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Стек протоколов </h1><div class="body"><img class="bottom" src="pics/ProtocolsStack.svg" /></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">12</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Internet Protocol (IP) </h1><div class="body"><div style="float: right; width: 65%"><img class="width" style="width: 100%" src="pics/IPProtocol.svg" /></div><ul class="item-1 level-1"><li>IP‑адрес<ul class="item-2 level-2"><li>IPv4<ul class="item-3 level-3"><li>32 бита, 4 октета</li><li><var>193.31.30.254</var></li></ul></li><li>IPv6<ul class="item-3 level-3"><li>128 бит, 8 групп</li><li><var>2a0b:7080:20<br ignore="ignore" />::1:9ae1</var></li></ul></li></ul></li><li>Порт (16 бит)</li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">13</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Transmission Control Protocol </h1><div class="body"><div style="float: right; width: 50%"><img class="width" style="width: 100%" src="pics/TCPProtocol.svg" /></div><ul class="item-1 level-1"><li>Двусторонний канал с гарантией доставки</li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">14</span></div></div></div></div>
<div class="slide"><div class="content"><h1>User Datagram Protocol </h1><div class="body"><div style="float: right; width: 50%"><img class="width" style="width: 100%" src="pics/UDPProtocol.svg" /></div><ul class="item-1 level-1"><li>Односторонний канал без гарантии доставки</li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">15</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Адреса</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Введение</a></li><li><a href="#(16)" class="toc current">Адреса</a></li><li><a href="#(22)" class="toc">Работа с TCP</a></li><li><a href="#(30)" class="toc">Работа с UDP</a></li><li><a href="#(36)" class="toc">URI и URL</a></li><li><a href="#(43)" class="toc">Соединения</a></li><li><a href="#(47)" class="toc">Работа с HTTP</a></li><li><a href="#(59)" class="toc">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">16</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Интернет‑адрес</h1><div class="body"><ul class="item-1 level-1"><li>Представляет пару IP‑адрес – доменное имя <img class="bottom" src="pics/InetAddress.svg" /></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">17</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Получение интернет‑адресов</h1><div class="body"><ul class="item-1 level-1"><li>Фабричные методы класса <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html" target="_blank">InetAddress</a></var><ul class="item-2 level-2"><li><var><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html" target="_blank">InetAddress</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html#getByName(java.lang.String)" target="_blank">getByName(string)</a></var></var> – любой по доменному имени</li><li><var><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html" target="_blank">InetAddress</a></var>[] <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html#getAllByName(java.lang.String)" target="_blank">getAllByName(string)</a></var></var> – все по доменному имени</li><li><var><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html" target="_blank">InetAddress</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html#getByAddress(byte[])" target="_blank">getByAddress(byte[])</a></var></var> – по IP‑адресу</li><li><var><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html" target="_blank">InetAddress</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html#getByAddress(java.lang.String,byte[])" target="_blank">getByAddress(string, byte[])</a></var></var> – по доменному имени и IP‑адресу</li><li><var><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html" target="_blank">InetAddress</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html#getLocalHost()" target="_blank">getLocalHost()</a></var></var> – адрес текущего компьютера</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">18</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Методы интернет‑адресов</h1><div class="body"><ul class="item-1 level-1"><li>Работа с DNS<ul class="item-2 level-2"><li><var><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" target="_blank">String</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html#getHostName()" target="_blank">getHostName()</a></var></var> – доменное имя</li><li><var><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" target="_blank">String</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html#getCanonicalHostName()" target="_blank">getCanonicalHostName()</a></var></var> – полное доменное имя</li></ul></li><li>Работа с IP‑адресом<ul class="item-2 level-2"><li><var>byte[] <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html#getAddress()" target="_blank">getAddress()</a></var></var> – получение IP‑адреса</li><li><var><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" target="_blank">String</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html#getHostAddress()" target="_blank">getHostAddress()</a></var></var> – получение IP‑адреса в текстовой форме</li></ul></li><li>Прочие<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html#isReachable(int)" target="_blank">isReachable(timeout)</a></var> – проверка достижимости</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">19</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Адрес порта</h1><div class="body"><ul class="item-1 level-1"><li>Представляет пару интернет‑адрес – порт </li></ul><div class="img-width"><img class="width" style="width: 60%" src="pics/InetSocketAddress.svg" /></div></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">20</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Класс InetSocketAddress</h1><div class="body"><ul class="item-1 level-1"><li>Конструкторы<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetSocketAddress.html#%3Cinit%3E(java.net.InetAddress,int)" target="_blank">InetSocketAddress(inetAddress, port)</a></var> – по адресу и порту</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetSocketAddress.html#%3Cinit%3E(java.lang.String,int)" target="_blank">InetSocketAddress(string, port)</a></var> – по доменному имени и порту</li></ul></li><li>Методы<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetSocketAddress.html#getAddress()" target="_blank">getAddress()</a></var> – получение интернет‑адреса</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetSocketAddress.html#getHostName()" target="_blank">getHostName()</a></var> – получение имени</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetSocketAddress.html#getPort()" target="_blank">getPort()</a></var> – получение порта</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">21</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Работа с TCP</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Введение</a></li><li><a href="#(16)" class="toc">Адреса</a></li><li><a href="#(22)" class="toc current">Работа с TCP</a></li><li><a href="#(30)" class="toc">Работа с UDP</a></li><li><a href="#(36)" class="toc">URI и URL</a></li><li><a href="#(43)" class="toc">Соединения</a></li><li><a href="#(47)" class="toc">Работа с HTTP</a></li><li><a href="#(59)" class="toc">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">22</span></div></div></div></div>
<div class="slide"><div class="content"><h1>TCP‑сокеты</h1><div class="body"><ul class="item-1 level-1"><li>Применяются для связи по протоколу TCP<ul class="item-2 level-2"><li>Образуют два независимых потока данных</li></ul></li><li>Классы<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html" target="_blank">Socket</a></var> – представляет TCP‑соединение, создает TCP‑соединение на стороне пользователя</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html" target="_blank">ServerSocket</a></var> – создает TCP‑соединения на стороне сервера</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">23</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Создание соединения на клиенте</h1><div class="body"><ul class="item-1 level-1"><li>Конструкторы класса <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html" target="_blank">Socket</a></var><ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#%3Cinit%3E(java.net.InetAddress,int)" target="_blank">Socket(inetAddress, port)</a></var> – по интернет‑адресу</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#%3Cinit%3E(java.lang.String,int)" target="_blank">Socket(host, port)</a></var> – по доменному имени</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#%3Cinit%3E(java.net.InetAddress,int,java.net.InetAddress,int)" target="_blank">Socket(inetAddress, port, inetAddress, port)</a></var> – по заданному локальному адресу и порту</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#%3Cinit%3E()" target="_blank">Socket()</a></var> – без установления соединения</li></ul></li><li>Методы класса Socket<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#connect(java.net.SocketAddress,int)" target="_blank">connect(socketAddress, timeout?)</a></var> – установить соединение</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">24</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Ввод‑вывод</h1><div class="body"><ul class="item-1 level-1"><li>Потоки<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#getInputStream()" target="_blank">getInputStream()</a></var> – входящий поток</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#getOutputStream()" target="_blank">getOutputStream()</a></var> – исходящий поток</li></ul></li><li>Закрытие потоков<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#shutdownInput()" target="_blank">shutdownInput()</a></var> – закрытие входящего потока и отбрасывание полученных данных</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#shutdownOutput()" target="_blank">shutdownOutput()</a></var> – закрытие исходящего потока</li></ul></li><li>Проверка потоков<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#isInputShutdown()" target="_blank">isInputShutdown()</a></var> – входящего потока</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#isOutputShutdown()" target="_blank">isOutputShutdown()</a></var> – исходящего потока</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">25</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Получение информации</h1><div class="body"><ul class="item-1 level-1"><li>Об удалённом конце<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#getInetAddress()" target="_blank">getInetAddress()</a></var> – интернет-адрес</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#getPort()" target="_blank">getPort()</a></var> – порт</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#getRemoteSocketAddress()" target="_blank">getRemoteSocketAddress()</a></var> – адрес порта</li></ul></li><li>О локальном конце<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#getLocalAddress()" target="_blank">getLocalAddress()</a></var> – интернет-адрес</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#getLocalPort()" target="_blank">getLocalPort()</a></var> – порт</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#getLocalSocketAddress()" target="_blank">getLocalSocketAddress()</a></var> – адрес порта</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">26</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Закрытие соединения</h1><div class="body"><ul class="item-1 level-1"><li>Методом сокета<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html#close()" target="_blank">socket.close()</a></var></li></ul></li><li>Методами потоков сокета<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/InputStream.html#close()" target="_blank">inputStream.close()</a></var></li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/OutputStream.html#close()" target="_blank">outputStream.close()</a></var></li></ul></li><li>При закрытии с удалённой стороны</li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">27</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Создание соединений на сервере</h1><div class="body"><ul class="item-1 level-1"><li>Конструкторы класса <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html" target="_blank">ServerSocket</a></var><ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html#%3Cinit%3E(int)" target="_blank">ServerSocket(port)</a></var> – по порту</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html#%3Cinit%3E(int,int)" target="_blank">ServerSocket(port, backlog)</a></var> – по порту, с указанием размера очереди</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html#%3Cinit%3E()" target="_blank">ServerSocket()</a></var> – без привязки</li></ul></li><li>Методы класса <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html" target="_blank">ServerSocket</a></var><ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html#bind(java.net.SocketAddress)" target="_blank">bind(socketAddress)</a></var> – по адресу порта</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html#bind(java.net.SocketAddress,int)" target="_blank">bind(socketAddress, backlog)</a></var> – по адресу порта, с указанием размера очереди</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">28</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Прием соединений на сервере</h1><div class="body"><ul class="item-1 level-1"><li>Методы класса <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html" target="_blank">ServerSocket</a></var><ul class="item-2 level-2"><li><var><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/Socket.html" target="_blank">Socket</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html#accept()" target="_blank">accept()</a></var></var> – ждёт следующего клиента и создает соединение</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html#setSoTimeout(int)" target="_blank">setSoTimeout(timeout)</a></var> – установка времени ожидания</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html#getSoTimeout()" target="_blank">getSoTimeout()</a></var> – получение времени ожидания</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/ServerSocket.html#close()" target="_blank">close()</a></var> – окончание ожидания клиентов</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">29</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Работа с UDP</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Введение</a></li><li><a href="#(16)" class="toc">Адреса</a></li><li><a href="#(22)" class="toc">Работа с TCP</a></li><li><a href="#(30)" class="toc current">Работа с UDP</a></li><li><a href="#(36)" class="toc">URI и URL</a></li><li><a href="#(43)" class="toc">Соединения</a></li><li><a href="#(47)" class="toc">Работа с HTTP</a></li><li><a href="#(59)" class="toc">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">30</span></div></div></div></div>
<div class="slide"><div class="content"><h1>UDP‑сокеты</h1><div class="body"><ul class="item-1 level-1"><li>Применяются для связи по протоколу UDP</li><li>Классы<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramPacket.html" target="_blank">DatagramPacket</a></var> – UDP-пакет</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramSocket.html" target="_blank">DatagramSocket</a></var> – UDP‑сокет для приема и отсылки пакетов</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">31</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Создание UDP‑пакетов</h1><div class="body"><ul class="item-1 level-1"><li>Для приема<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramPacket.html#%3Cinit%3E(byte[],int,int)" target="_blank">DatagramPacket(byte[], offset?, length)</a></var> – по буферу</li></ul></li><li>Для отправки<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramPacket.html#%3Cinit%3E(byte[],int,int,java.net.InetAddress,int)" target="_blank">DatagramPacket(byte[], offset?, length, inetAddr, port)</a></var> – по интернет‑адресу и порту</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramPacket.html#%3Cinit%3E(byte[],int,int,java.net.SocketAddress)" target="_blank">DatagramPacket(byte[], offset?, length, socketAddr)</a></var> – по адресу порта</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">32</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Операции с UDP‑пакетами</h1><div class="body"><ul class="item-1 level-1"><li>Данные<ul class="item-2 level-2"><li><var>byte[] <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramPacket.html#getData()" target="_blank">data</a></var></var> – буфер</li><li><var> int <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramPacket.html#getOffset()" target="_blank">getOffset()</a></var></var> – смещение</li><li><var>int <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramPacket.html#getLength()" target="_blank">length</a></var></var> – длина</li></ul></li><li>Работа с адресами<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InetAddress.html" target="_blank">InetAddress</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramPacket.html#getAddress()" target="_blank">address</a></var> – хост</li><li><var>int <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramPacket.html#getPort()" target="_blank">getPort()</a></var></var> – порт</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/SocketAddress.html" target="_blank">SocketAddress</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramPacket.html#getSocketAddress()" target="_blank">getSocketAddress()</a></var> – адрес порта</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">33</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Создание UDP‑сокета</h1><div class="body"><ul class="item-1 level-1"><li>Конструкторы класса <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramSocket.html" target="_blank">DatagramSocket</a></var><ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramSocket.html#%3Cinit%3E(int)" target="_blank">DatagramSocket(port)</a></var> – по порту</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramSocket.html#%3Cinit%3E()" target="_blank">DatagramSocket()</a></var> – случайный порт</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramSocket.html#%3Cinit%3E(int,java.net.InetAddress)" target="_blank">DatagramSocket(port, inetAddress)</a></var> – по порту и адресу</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramSocket.html#%3Cinit%3E(java.net.SocketAddress)" target="_blank">DatagramSocket(socketAddress)</a></var> – по адресу порта</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramSocket.html#%3Cinit%3E(java.net.SocketAddress)" target="_blank">DatagramSocket(null)</a></var> – без привязки</li></ul></li><li>Методы класса <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramSocket.html" target="_blank">DatagramSocket</a></var><ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramSocket.html#bind(java.net.SocketAddress)" target="_blank">bind(socketAddress)</a></var> – привязывает к адресу</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">34</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Прием и отсылка UDP‑пакетов</h1><div class="body"><ul class="item-1 level-1"><li>Прием пакета<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramSocket.html#receive(java.net.DatagramPacket)" target="_blank">receive(datagramPacket)</a></var> – ожидает получения пакета</li><li>Блокируется до приема пакета</li><li>Возможно принимать пакеты параллельно</li></ul></li><li>Отсылка пакета<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/DatagramSocket.html#send(java.net.DatagramPacket)" target="_blank">send(datagramPacket)</a></var> – отсылает пакет</li><li>Возможно отсылать пакеты параллельно</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">35</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>URI и URL</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Введение</a></li><li><a href="#(16)" class="toc">Адреса</a></li><li><a href="#(22)" class="toc">Работа с TCP</a></li><li><a href="#(30)" class="toc">Работа с UDP</a></li><li><a href="#(36)" class="toc current">URI и URL</a></li><li><a href="#(43)" class="toc">Соединения</a></li><li><a href="#(47)" class="toc">Работа с HTTP</a></li><li><a href="#(59)" class="toc">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">36</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Uniform Resource Identifier</h1><div class="body"><ul class="item-1 level-1"><li>Идентифицирует ресурс</li><li>Общий URI<ul class="item-2 level-2"><li><var>[scheme:]scheme‑specific‑part[#fragment]</var></li></ul></li><li>Иерархический URI<ul class="item-2 level-2"><li><var>[scheme:][//[user‑info@]host[:port]][path][?query] [#fragment]</var></li></ul></li><li>Класс <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html" target="_blank">URI</a></var></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">37</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Создание URI</h1><div class="body"><ul class="item-1 level-1"><li>Конструкторы<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#%3Cinit%3E(java.lang.String)" target="_blank">URI(string)</a></var> – по строке</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#%3Cinit%3E(java.lang.String,java.lang.String,java.lang.String)" target="_blank">URI(scheme, ssp, fragment)</a></var> – из крупных частей</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#%3Cinit%3E(java.lang.String,java.lang.String,java.lang.String,int,java.lang.String,java.lang.String,java.lang.String)" target="_blank">URI(scheme, userInfo, host, port, path, query, fragment)</a></var> – из мелких частей</li><li>Исключение <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URISyntaxException.html" target="_blank">URISyntaxException</a></var></li></ul></li><li>Фабричные методы класса <var>URI</var><ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#create(java.lang.String)" target="_blank">create(string)</a></var> – по строке</li></ul></li><li>Из других объектов<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/File.html#toURI()" target="_blank">file.toURI()</a></var> – из дескриптора файла</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URL.html#toURI()" target="_blank">uRL.toURI()</a></var> – из <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URL.html" target="_blank">URL</a></var></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">38</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Получение частей URI </h1><div class="body"><table><tr><td colspan="3"><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#getScheme()" target="_blank">getScheme()</a></var></td><td> scheme</td></tr><tr><td colspan="3"><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#getSchemeSpecificPart()" target="_blank">getSchemeSpecificPart()</a></var></td><td> scheme‑specific part</td></tr><tr><td /><td colspan="2"><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#getAuthority()" target="_blank">getAuthority()</a></var></td><td> [user‑info@]host[:port]</td></tr><tr><td /><td /><td><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#getUserInfo()" target="_blank">getUserInfo()</a></var></td><td> user‑info</td></tr><tr><td /><td /><td><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#getHost()" target="_blank">getHost()</a></var></td><td> host</td></tr><tr><td /><td /><td><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#getPort()" target="_blank">getPort()</a></var></td><td> port</td></tr><tr><td /><td colspan="2"><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#getPath()" target="_blank">getPath()</a></var></td><td> path</td></tr><tr><td /><td colspan="2"><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#getQuery()" target="_blank">getQuery()</a></var></td><td> query</td></tr><tr><td colspan="3"><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#getFragment()" target="_blank">getFragment()</a></var></td><td> fragment</td></tr></table></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">39</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Операции над URI</h1><div class="body"><ul class="item-1 level-1"><li>Нормализация<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#normalize()" target="_blank">normalize()</a></var> – нормализовать URI</li></ul></li><li>«Откладывание» от базового URI<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#resolve(java.net.URI)" target="_blank">resolve(URI relative)</a></var></li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#resolve(java.lang.String)" target="_blank">resolve(String relative)</a></var></li></ul></li><li>Взятие относительного URI<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#relativize(java.net.URI)" target="_blank">relativize(uri)</a></var></li></ul></li><li>Сравнение<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#equals(java.lang.Object)" target="_blank">equals(object)</a></var></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">40</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Uniform Resource Locator</h1><div class="body"><ul class="item-1 level-1"><li>Указывает местоположение ресурса</li><li>Подмножество иерархических <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html" target="_blank">URI</a></var></li><li>Класс <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URL.html" target="_blank">URL</a></var></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">41</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Создание URL</h1><div class="body"><ul class="item-1 level-1"><li>Конструкторы<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URL.html#%3Cinit%3E(java.lang.String)" target="_blank">URL(string)</a></var> – по строке</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URL.html#%3Cinit%3E(java.lang.String,java.lang.String,java.lang.String)" target="_blank">URL(protocol, host, file)</a></var> – из частей</li></ul></li><li>Из других объектов<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/File.html#toURL()" target="_blank">file.toURL()</a></var> – из дескриптора файла</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#toURL()" target="_blank">uRI.toURL()</a></var> – из <var>URI</var></li></ul></li><li>Исключение <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/MalformedURLException.html" target="_blank">MalformedURLException</a></var></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">42</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Соединения</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Введение</a></li><li><a href="#(16)" class="toc">Адреса</a></li><li><a href="#(22)" class="toc">Работа с TCP</a></li><li><a href="#(30)" class="toc">Работа с UDP</a></li><li><a href="#(36)" class="toc">URI и URL</a></li><li><a href="#(43)" class="toc current">Соединения</a></li><li><a href="#(47)" class="toc">Работа с HTTP</a></li><li><a href="#(59)" class="toc">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">43</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Соединения</h1><div class="body"><ul class="item-1 level-1"><li>Позволяют оперировать с ресурсами, заданными <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URL.html" target="_blank">URL</a></var><img class="bottom" src="pics/URLConnection.svg" /></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">44</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Жизненный цикл соединения</h1><div class="body"><ul class="item-1 level-1"><li>Открытие соединения<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URL.html#openConnection()" target="_blank">uRL.openConnection()</a></var></li></ul></li><li>Установка свойств соединения</li><li>Установка соединения<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URLConnection.html#connect()" target="_blank">connect()</a></var></li></ul></li><li>Получение потоков<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URLConnection.html#getInputStream()" target="_blank">getInputStream()</a></var> / <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URLConnection.html#getOutputStream()" target="_blank">getOutputStream()</a></var></li></ul></li><li>Закрытие соединения<ul class="item-2 level-2"><li>Закрытие потоков</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">45</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Поддерживаемые протоколы</h1><div class="body"><ul class="item-1 level-1"><li><var>http</var> – HTTP‑ресурс</li><li><var>https</var> – HTTPS‑ресурс</li><li><var>ftp</var> – FTP‑файл</li><li><var>file</var> – локальный файл</li><li><var>jar</var> – файл внутри Jar</li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">46</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Работа с HTTP</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Введение</a></li><li><a href="#(16)" class="toc">Адреса</a></li><li><a href="#(22)" class="toc">Работа с TCP</a></li><li><a href="#(30)" class="toc">Работа с UDP</a></li><li><a href="#(36)" class="toc">URI и URL</a></li><li><a href="#(43)" class="toc">Соединения</a></li><li><a href="#(47)" class="toc current">Работа с HTTP</a><ol class="level-2 toc-2"><li><a href="#(48)" class="">Клиент</a></li><li><a href="#(54)" class="">Сервер</a></li></ol></li><li><a href="#(59)" class="toc">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">47</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Клиент</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Введение</a></li><li><a href="#(16)" class="toc">Адреса</a></li><li><a href="#(22)" class="toc">Работа с TCP</a></li><li><a href="#(30)" class="toc">Работа с UDP</a></li><li><a href="#(36)" class="toc">URI и URL</a></li><li><a href="#(43)" class="toc">Соединения</a></li><li><a href="#(47)" class="toc current">Работа с HTTP</a><ol class="level-2 toc-2"><li><a href="#(48)" class=" current">Клиент</a></li><li><a href="#(54)" class="">Сервер</a></li></ol></li><li><a href="#(59)" class="toc">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">48</span></div></div></div></div>
<div class="slide"><div class="content"><h1>HTTP client</h1><div class="body"><ul class="item-1 level-1"><li>Модуль/пакет <var>java.net.http</var></li><li>Основные классы<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpClient.html" target="_blank">HttpClient</a></var> – координатор</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpRequest.html" target="_blank">HttpRequest</a></var> – запрос</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.html" target="_blank">HttpResponse</a></var> – ответ</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/WebSocket.html" target="_blank">WebSocket</a></var> – соединение</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">49</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Создание клиента</h1><div class="body"><ul class="item-1 level-1"><li>Класс <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpClient.Builder.html" target="_blank">HttpClient.Builder</a></var><ul class="item-2 level-2"><li><pre class="prettyprint lang-java">HttpClient client = HttpClient.newBuilder()
    .version(HttpClient.Version.HTTP_2)
    .proxy(ProxySelector.of(
        new InetSocketAddress("proxy.itmo.ru", 3128)))
    .followRedirects(
        HttpClient.Redirect.NORMAL)
    .cookieHandler(new CookieManager())
    .authenticator(new Authenticator(){...})
    .build();
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">50</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Создание запроса</h1><div class="body"><ul class="item-1 level-1"><li>Класс <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpRequest.Builder.html" target="_blank">HttpRequest.Builder</a></var><ul class="item-2 level-2"><li><pre class="prettyprint lang-java">HttpRequest request = HttpRequest.newBuilder()
    .uri(new URI("https://www.kgeorgiy.info/hello"))
    .version(HttpClient.Version.HTTP_2)
    .header("Cache‑Control", "no‑cache")
    .header("User‑Agent", "hello")
    .timeout(Duration.ofSeconds(3))
    .POST(HttpRequest.BodyPublishers
        .ofString("world", StandardCharsets.UTF_8))
    .build();
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">51</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Исполнение запроса</h1><div class="body"><ul class="item-1 level-1"><li>Класс <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpClient.html" target="_blank">HttpClient</a></var><ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.html" target="_blank">HttpResponse&lt;T&gt;</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpClient.html#send(java.net.http.HttpRequest,java.net.http.HttpResponse.BodyHandler)" target="_blank">send(request, handler&lt;T&gt;)</a></var> – синхронный</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/CompletableFuture.html" target="_blank">CompletableFuture&lt;HttpResponse&lt;T&gt;&gt;</a></var>  <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpClient.html#sendAsync(java.net.http.HttpRequest,java.net.http.HttpResponse.BodyHandler)" target="_blank">sendAsync(request, handler&lt;T&gt;)</a></var> – асинхронный</li></ul></li><li>Обработчик результата<ul class="item-2 level-2"><li>Интерфейс <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandler.html" target="_blank">HttpResponse.BodyHandler&lt;T&gt;</a></var></li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html#ofByteArray()" target="_blank">ofByteArray()</a></var> – данные</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html#ofString(java.nio.charset.Charset)" target="_blank">ofString(charset)</a></var> – текст</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html#ofFile(java.nio.file.Path)" target="_blank">ofFile(path)</a></var> – файл</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html#ofFileDownload(java.nio.file.Path,java.nio.file.OpenOption...)" target="_blank">ofFileDownload(dir, openOption...)</a></var> – файл</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.BodyHandlers.html#discarding()" target="_blank">discarding()</a></var> – игнорировать</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">52</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Результат</h1><div class="body"><ul class="item-1 level-1"><li>Класс <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.html" target="_blank">HttpResponse&lt;T&gt;</a></var><ul class="item-2 level-2"><li><var>int <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.html#statusCode()" target="_blank">statusCode()</a></var></var> – HTTP статус</li><li><var>T <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.html#body()" target="_blank">body()</a></var></var> – тело</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.net.http/java/net/http/HttpResponse.html#request()" target="_blank">request()</a></var> – запрос</li></ul></li><li>Пример<ul class="item-2 level-2"><li><pre class="prettyprint lang-java">HttpResponse&lt;String&gt; response = client.send(request,
    HttpResponse.BodyHandlers.ofString(
        StandardCharsets.UTF_8));
if (response.statusCode() ==
        HttpURLConnection.HTTP_OK
) {
    System.out.println(response.body());
} else { // Fail }
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">53</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Сервер</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Введение</a></li><li><a href="#(16)" class="toc">Адреса</a></li><li><a href="#(22)" class="toc">Работа с TCP</a></li><li><a href="#(30)" class="toc">Работа с UDP</a></li><li><a href="#(36)" class="toc">URI и URL</a></li><li><a href="#(43)" class="toc">Соединения</a></li><li><a href="#(47)" class="toc current">Работа с HTTP</a><ol class="level-2 toc-2"><li><a href="#(48)" class="">Клиент</a></li><li><a href="#(54)" class=" current">Сервер</a></li></ol></li><li><a href="#(59)" class="toc">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">54</span></div></div></div></div>
<div class="slide"><div class="content"><h1>HTTP server</h1><div class="body"><ul class="item-1 level-1"><li>Модуль <var>jdk.httpserver</var></li><li>Пакет <var>com.sun.net.httpserver</var></li><li>Основные классы<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpServer.html" target="_blank">HttpServer</a></var> – сервер</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpExchange.html" target="_blank">HttpExchange</a></var> – запрос и результат</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpHandler.html" target="_blank">HttpHandler</a></var> – обработчик запросов</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/Filter.html" target="_blank">Filter</a></var> – пред‑ и пост‑ обработчики</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">55</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Обработчик запросов</h1><div class="body"><ul class="item-1 level-1"><li>Интерфейс <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpHandler.html" target="_blank">HttpHandler</a></var><ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpHandler.html#handle(com.sun.net.httpserver.HttpExchange)" target="_blank">handle(httpExchange)</a></var> – обработать запрос</li></ul></li><li>Интерфейс <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpExchange.html" target="_blank">HttpExchange</a></var><ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" target="_blank">String</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpExchange.html#getRequestMethod()" target="_blank">getRequestMethod()</a></var> – метод</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/InputStream.html" target="_blank">InputStream</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpExchange.html#getRequestBody()" target="_blank">getRequestBody()</a></var> – данные</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpExchange.html#sendResponseHeaders(int,long)" target="_blank">sendResponseHeaders(status, length)</a></var> – статус и размер ответа</li><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/OutputStream.html" target="_blank">OutputStream</a></var> <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpExchange.html#getResponseBody()" target="_blank">getResponseBody()</a></var> – ответ</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">56</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Пример обработчика</h1><div class="body"><ul class="item-3 level-3"><li><pre class="prettyprint lang-java">HttpHandler helloHandler = t -&gt; {
    String name;
    try (IS is = t.getRequestBody()) {
        name = new BR(new ISR(is, SC.UTF_8)).readLine();
    }
    byte[] response = ("Hello, " + name)
        .getBytes(SC.UTF_8);
    t.sendResponseHeaders(
        HttpURLConnection.HTTP_OK, response.length);
    try (OutputStream os = t.getResponseBody()) {
        os.write(response);
    }
};
</pre></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">57</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Сервер</h1><div class="body"><ul class="item-1 level-1"><li>Класс <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/jdk.httpserver/com/sun/net/httpserver/HttpServer.html" target="_blank">HttpServer</a></var></li><li>Пример<ul class="item-2 level-2"><li><pre class="prettyprint lang-java">HttpServer server = HttpServer.create(
    new InetSocketAddress(8080), // порт
    0 // размер очереди
);
server.createContext("/hello", helloHandler);
server.setExecutor(null); // по умолчанию
server.start();
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">58</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Заключение</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Введение</a></li><li><a href="#(16)" class="toc">Адреса</a></li><li><a href="#(22)" class="toc">Работа с TCP</a></li><li><a href="#(30)" class="toc">Работа с UDP</a></li><li><a href="#(36)" class="toc">URI и URL</a></li><li><a href="#(43)" class="toc">Соединения</a></li><li><a href="#(47)" class="toc">Работа с HTTP</a></li><li><a href="#(59)" class="toc current">Заключение</a></li></ol></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">59</span></div></div></div></div>
<div class="slide"><div class="content"><h1>За кадром</h1><div class="body"><ul class="item-1 level-1"><li>HTTPS/TLS/SSL<ul class="item-2 level-2"><li>Пакет <var>javax.net.ssl</var></li></ul></li><li>Сетевые интерфейсы<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/InterfaceAddress.html" target="_blank">InterfaceAddress</a></var>, <var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/NetworkInterface.html" target="_blank">NetworkInterface</a></var></li></ul></li><li>Реализация протоколов<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URLStreamHandler.html" target="_blank">URLStreamHandler</a></var>(<var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/spi/URLStreamHandlerProvider.html" target="_blank">Provider</a></var>)</li></ul></li><li>Поиск адресов<ul class="item-2 level-2"><li><var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/spi/InetAddressResolver.html" target="_blank">InetAddressResolver</a></var>(<var><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/spi/InetAddressResolverProvider.html" target="_blank">Provider</a></var>)</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">60</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Ссылки</h1><div class="body"><ul class="item-1 level-1"><li>Java Networking // <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/net/" target="_blank">http://docs.oracle.com/javase/8/docs/<br />technotes/guides/net/</a></li><li>Custom Networking (tutorial) // <a href="http://java.sun.com/docs/books/tutorial/networking/index.html" target="_blank">http://java.sun.com/docs/books/tutorial/<br />networking/index.html</a></li><li>Uniform Resource Locators (URL) // <a href="http://tools.ietf.org/html/rfc1738" target="_blank">http://tools.ietf.org/html/rfc1738</a></li><li>Uniform Resource Identifiers (URI) // <a href="http://tools.ietf.org/html/rfc3986" target="_blank">http://tools.ietf.org/html/rfc3986</a></li></ul></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">61</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Вопросы</h1><div class="body"><div class="questions">???</div></div><div class="footer"><div class="test"><span class="author">Georgiy Korneev</span><span class="title">Технологии Java / Работа с сетью</span><span class="number">62</span></div></div></div></div></div></body></html>