<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="ru" xml:lang="ru" xmlns="http://www.w3.org/1999/xhtml"><head><title>Базы данных / Неполные данные и null</title><meta name="author" content="" /><link rel="stylesheet" type="text/css" media="screen, projection, print" href="scripts/slidy.css" /><link rel="stylesheet" type="text/css" href="scripts/prettify.css" /><link rel="stylesheet" type="text/css" href="scripts/kgeorgiy-slides.css" /><script type="text/javascript" src="scripts/slidy.js" charset="utf-8" /><script type="text/javascript" src="scripts/kgeorgiy-slides.js" charset="utf-8" /><script type="text/javascript" src="scripts/prettify.js" /><script type="text/javascript" src="scripts/lang-sql.js" /><script type="text/javascript" src="scripts/lang-javaModule.js" /><script type="text/javascript" src="scripts/lang-scala.js" /><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML" /><script type="text/javascript">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']], displayMath: [['$$','$$']], ignoreClass: "", processClass: "math|lang-math"}});</script><script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-37693764-1"]);_gaq.push(["_setDomainName","kgeorgiy.info"]);_gaq.push(["_trackPageview"]);(function(){var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8EQ66D87ZZ" /><script>
                  window.dataLayer = window.dataLayer || [];
                  function gtag(){dataLayer.push(arguments);}
                  gtag('js', new Date());

                  gtag('config', 'G-8EQ66D87ZZ');
                </script></head><body onload="prettyPrint()"><div id="all">
<div class="slide cover"><div class="content"><div class="course">Базы данных</div><hr /><div class="lecture"><div>Неполные данные и null</div></div><div class="link"><a href="https://kgeorgiy.info/courses/dbms/">https://kgeorgiy.info/courses/dbms/</a></div><div class="copyright"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.ru"><span class="copyright">Copyright © Георгий Корнеев</span><img src="scripts/by-nc-sa.png" alt="Attribution-NonCommercial-ShareAlike" /></a></div></div></div>
<div class="slide section"><div class="content"><h1>Что означает null?</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc current">Что означает null?</a></li><li><a href="#(5)" class="toc">Операции с null</a></li><li><a href="#(14)" class="toc">Null и SQL</a></li><li><a href="#(20)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">2</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Что означает GroupId is null?</h1><div class="body"><ul class="item-1 level-1"><li class="incremental"><div class="non-incremental">Значение не известно<ul class="item-2 level-2"><li>Студент неизвестно какой группы</li></ul></div></li><li class="incremental"><div class="non-incremental">Значение не верно<ul class="item-2 level-2"><li>Студент группы XXXX</li></ul></div></li><li class="incremental"><div class="non-incremental">Значение ещё/уже не существует<ul class="item-2 level-2"><li>Студент зачислен, но не определен в группу</li><li>Группа отчисленного студента</li></ul></div></li><li class="incremental"><div class="non-incremental">Значение не имеет смысла<ul class="item-2 level-2"><li>Студент другого университета</li></ul></div></li><li class="incremental"><div class="non-incremental">Недоступно<ul class="item-2 level-2"><li>Нет права узнать группу</li></ul></div></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">3</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Можно ли обойтись без null?</h1><div class="body"><ul class="item-1 level-1"><li>Представление отсуствующих значений<ul class="item-2 level-2"><li><span class="question">Как представить кортеж, с неопределенными частями?</span></li><li class="incremental"><div class="non-incremental">Необязательная связь 1:1</div></li></ul></li><li class="incremental"><div class="non-incremental"><span class="question">Где еще появляется <var>null</var>?</span><ul class="item-2 level-2"><li class="incremental"><div class="non-incremental">Множественные операции</div></li><li class="incremental"><div class="non-incremental">Внешние соединения</div></li><li class="incremental"><div class="non-incremental">⇒ без <var>null</var> не обойтись</div></li></ul></div></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">4</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Операции с null</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Что означает null?</a></li><li><a href="#(5)" class="toc current">Операции с null</a></li><li><a href="#(14)" class="toc">Null и SQL</a></li><li><a href="#(20)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">5</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Тернарная логика (1)</h1><div class="body"><ul class="item-1 level-1"><li>Логические операции<ul class="item-2 level-2"><li>Конъюнкция <table><tr><th class="center"><var>and</var></th><th class="center"> false </th><th class="center"> unknown </th><th class="center"> true</th></tr><tr><th class="center"> false </th><td class="center"> false </td><td class="center"> false </td><td class="center"> false</td></tr><tr><th class="center"> unknown </th><td class="center"> false </td><td class="center"> unknown </td><td class="center"> unknown</td></tr><tr><th class="center"> true </th><td class="center"> false </td><td class="center"> unknown </td><td class="center"> true</td></tr></table></li><li>Дизъюнкция <table><tr><th class="center"><var>or</var></th><th class="center"> false </th><th class="center"> unknown </th><th class="center"> true</th></tr><tr><th class="center"> false </th><td class="center"> false </td><td class="center"> unknown </td><td class="center"> true</td></tr><tr><th class="center"> unknown </th><td class="center"> unknown </td><td class="center"> unknown </td><td class="center"> true</td></tr><tr><th class="center"> true </th><td class="center"> true </td><td class="center"> true </td><td class="center"> true</td></tr></table></li><li>Отрицание <table><tr><th class="center" /><th class="center"> false </th><th class="center"> unknown </th><th class="center"> true</th></tr><tr><th class="center"><var>not</var></th><td class="center"> true </td><td class="center"> unknown </td><td class="center"> false</td></tr></table></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">6</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Тернарная логика (2)</h1><div class="body"><ul class="item-1 level-1"><li>Импликация<ul class="item-2 level-2"><li><var>A → B</var> = <var>¬ A ∨ B</var><table><tr><th class="center"> A \ B </th><th class="center"> false </th><th class="center"> unknown </th><th class="center"> true</th></tr><tr><th class="center"> false </th><td class="center"> true </td><td class="center"> true </td><td class="center"> true</td></tr><tr><th class="center"> unknown </th><td class="center"> unknown </td><td class="center"> unknown </td><td class="center"> true</td></tr><tr><th class="center"> true </th><td class="center"> false </td><td class="center"> unknown </td><td class="center"> true</td></tr></table></li><li><var>A∨B → B</var> = <var>¬ (A ∨ B) ∨ B</var> = <var>¬ A ∧ ¬ B ∨ B</var> =<br ignore="ignore" /> = <var>(¬ A ∨ B) ∧ (¬ B ∨ B)</var> = <var>¬ A ∨ B</var><table><tr><th class="center"> A \ B </th><th class="center"> false </th><th class="center"> unknown </th><th class="center"> true</th></tr><tr><th class="center"> false </th><td class="center"> true </td><td class="center"> unknown </td><td class="center"> true</td></tr><tr><th class="center"> unknown </th><td class="center"> unknown </td><td class="center"> unknown </td><td class="center"> true</td></tr><tr><th class="center"> true </th><td class="center"> false </td><td class="center"> unknown </td><td class="center"> true</td></tr></table></li><li class="incremental"><div class="non-incremental"><span class="warn">Привычный вывод не работает</span></div></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">7</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Тернарная логика (3)</h1><div class="body"><ul class="item-1 level-1"><li>Сравнение<ul class="item-2 level-2"><li>Равенство <table><tr><th class="center"><var>=</var></th><th class="center"> true </th><th class="center"> unknown </th><th class="center"> false</th></tr><tr><th class="center"> true </th><td class="center"> true </td><td class="center"> unknown </td><td class="center"> false</td></tr><tr><th class="center"> unknown </th><td class="center"> unknown </td><td class="center"> unknown </td><td class="center"> unknown</td></tr><tr><th class="center"> false </th><td class="center"> false </td><td class="center"> unknown </td><td class="center"> true</td></tr></table></li><li><var>is</var><table><tr><th class="center" /><th class="center"> true </th><th class="center"> unknown </th><th class="center"> false</th></tr><tr><th><var>is true</var></th><td class="center"> true </td><td class="center"> false </td><td class="center"> false</td></tr><tr><th><var>is unknown</var></th><td class="center"> false </td><td class="center"> true </td><td class="center"> false</td></tr><tr><th><var>is false</var></th><td class="center"> false </td><td class="center"> false </td><td class="center"> true</td></tr><tr><th><var>is not true</var></th><td class="center"> false </td><td class="center"> true </td><td class="center"> true</td></tr><tr><th><var>is not unknown</var></th><td class="center"> true </td><td class="center"> false </td><td class="center"> true</td></tr><tr><th><var>is not false</var></th><td class="center"> true </td><td class="center"> true </td><td class="center"> false</td></tr></table></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">8</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Скалярные операции</h1><div class="body"><ul class="item-1 level-1"><li><var>null</var> заразен<ul class="item-2 level-2"><li><var>=</var>, <var>&lt;&gt;</var>, <var>&lt;</var>, <var>&lt;=</var>, <var>&gt;</var>, <var>&gt;=</var></li><li><var>+</var>, <var>−</var>, <var>*</var>, <var>/</var></li><li><var>||</var></li><li><var>in</var></li></ul></li><li><var>coalesce(v1, v2, ...)</var><ul class="item-2 level-2"><li>первый не <var>null</var></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">9</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Null и дубликаты</h1><div class="body"><ul class="item-1 level-1"><li><span class="question">Как сравнивать кортежи, содержащие <var>null</var>?</span></li><li class="incremental"><div class="non-incremental"><span class="question">Чему равно <span class="mathO"><span class="math">$R ∪ R$</span></span>?</span></div></li><li class="incremental"><div class="non-incremental"><span class="question">Чему равно <span class="mathO"><span class="math">$R ∩ R$</span></span>?</span></div></li><li class="incremental"><div class="non-incremental"><span class="question">Чему равно <span class="mathO"><span class="math">$R ⋈ R$</span></span>?</span><ul class="item-2 level-2"><li>⇒ <span class="mathO"><span class="math">$R ⋈ R ≠ R$</span></span></li></ul></div></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">10</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Спецэффекты</h1><div class="body"><ul class="item-1 level-1"><li><span class="question">Чему равно <var>x = x</var>?</span><ul class="item-2 level-2"><li><var>true</var> или <var>null</var></li></ul></li><li class="incremental"><div class="non-incremental"><span class="question">Чему равно <var>x &lt;&gt; x</var>?</span><ul class="item-2 level-2"><li><var>false</var> или <var>null</var></li></ul></div></li><li class="incremental"><div class="non-incremental"><span class="question">Чему равно <var>x or x</var>?</span><ul class="item-2 level-2"><li><var>x</var></li></ul></div></li><li class="incremental"><div class="non-incremental"><span class="question">Чему равно <var>x or not x</var>?</span><ul class="item-2 level-2"><li><var>true</var> или <var>null</var></li></ul></div></li><li class="incremental"><div class="non-incremental"><span class="question">Чему равно <var>x and not x</var>?</span><ul class="item-2 level-2"><li><var>false</var> или <var>null</var></li></ul></div></li><li class="incremental"><div class="non-incremental"><span class="question">Транзитивность сравнения?</span></div></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">11</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Null и ключи</h1><div class="body"><ul class="item-1 level-1"><li>Первичные ключи<ul class="item-2 level-2"><li>Не могут содержать <var>null</var></li></ul></li><li>Альтернативные ключи<ul class="item-2 level-2"><li>Часто не могут содержать <var>null</var></li></ul></li><li>Внешние ключи<ul class="item-2 level-2"><li>Простые</li><li>Составные<ul class="item-3 level-3"><li>Отсутствующие целиком</li></ul></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">12</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Null не интутитивен</h1><div class="body"><ul class="item-1 level-1"><li>Студенты не учащиеся в группе M34391<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">select * from Students where GId &lt;&gt; 'M34391';
</pre></li><li>Корректность зависит от смысла <var>null</var></li></ul></li><li><span class="question">Все студенты?</span><ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">select * from Students where GId &lt;&gt; 'M34391'
union
select * from Students where GId = 'M34391'
</pre></li><li class="incremental"><div class="non-incremental"><span class="warn">Нет!</span></div></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">13</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Null и SQL</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Что означает null?</a></li><li><a href="#(5)" class="toc">Операции с null</a></li><li><a href="#(14)" class="toc current">Null и SQL</a></li><li><a href="#(20)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">14</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Предикаты</h1><div class="body"><ul class="item-1 level-1"><li>DML<ul class="item-2 level-2"><li><var>where</var></li><li><var>having</var></li><li>Остаются только <var>true</var></li><li><var>unknown → false</var></li></ul></li><li>DDL<ul class="item-2 level-2"><li><var>check</var></li><li>Не подходят только <var>false</var></li><li><var>unknown → true</var></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">15</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Различимость</h1><div class="body"><ul class="item-1 level-1"><li>Два <var>null</var><ul class="item-2 level-2"><li>Не равны</li><li>Не различимы</li></ul></li><li>Использование<ul class="item-2 level-2"><li><var>distinct</var></li><li><var>group by</var></li><li>Операции на множествах</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">16</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Типы столбцов</h1><div class="body"><ul class="item-1 level-1"><li><var>nullable</var> (по умолчанию)<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">birthday date
</pre></li></ul></li><li>Не <var>nullable</var><ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">birthday date not null
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">17</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Проверки значений</h1><div class="body"><ul class="item-1 level-1"><li>Синтаксис<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">значение is [not] {null|true|false|unknown}
</pre></li></ul></li><li>Примеры<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">x is null
x is not true
(x or x) is not null
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">18</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Прочее</h1><div class="body"><ul class="item-1 level-1"><li><var>exists</var><ul class="item-2 level-2"><li>Только <var>true</var> или <var>false</var></li><li><var>null</var> → <var>false</var></li></ul></li><li>Агрегирующие функции<ul class="item-2 level-2"><li>Пропускают <var>null</var></li><li>Без аргументов ⇒ <var>null</var></li><li>Кроме <var>count(*)</var></li></ul></li><li><var>order by</var> сортирует <var>null</var>'ы<ul class="item-2 level-2"><li><var>nulls first</var>/<var>last</var></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">19</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Литература</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Что означает null?</a></li><li><a href="#(5)" class="toc">Операции с null</a></li><li><a href="#(14)" class="toc">Null и SQL</a></li><li><a href="#(20)" class="toc current">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">20</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Основная литература</h1><div class="body"><ul class="item-1 level-1"><li><em>Дейт К.</em> Введение в системы баз данных (глава 19)</li><li><em>Gulutzan P.</em>, <em>Pelzer T.</em> SQL-99 complete, really<ul class="item-2 level-2"><li><a href="https://crate.io/docs/sql-99/en/latest/chapters/13.html" target="_blank">Chapter 13 – NULLs</a></li></ul></li><li><em>Celko J.</em><br ignore="ignore" /><a href="https://www.red-gate.com/simple-talk/databases/sql-server/learn/sql-and-the-snare-of-three-valued-logic/" target="_blank">SQL and the Snare of Three-Valued Logic</a></li><li><em>Wikibooks</em><br ignore="ignore" /><a href="https://en.wikibooks.org/wiki/Structured_Query_Language/NULLs_and_the_Three_Valued_Logic" target="_blank">SQL: NULLs and the Three Valued Logic</a></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Неполные данные и null</span><span class="number">21</span></div></div></div></div></div></body></html>