<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="ru" xml:lang="ru" xmlns="http://www.w3.org/1999/xhtml"><head><title>Базы данных / Распределённые базы данных</title><meta name="author" content="" /><link rel="stylesheet" type="text/css" media="screen, projection, print" href="scripts/slidy.css" /><link rel="stylesheet" type="text/css" href="scripts/prettify.css" /><link rel="stylesheet" type="text/css" href="scripts/kgeorgiy-slides.css" /><script type="text/javascript" src="scripts/slidy.js" charset="utf-8" /><script type="text/javascript" src="scripts/kgeorgiy-slides.js" charset="utf-8" /><script type="text/javascript" src="scripts/prettify.js" /><script type="text/javascript" src="scripts/lang-sql.js" /><script type="text/javascript" src="scripts/lang-javaModule.js" /><script type="text/javascript" src="scripts/lang-scala.js" /><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML" /><script type="text/javascript">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$']], displayMath: [['$$','$$']], ignoreClass: "", processClass: "math|lang-math"}});</script><script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-37693764-1"]);_gaq.push(["_setDomainName","kgeorgiy.info"]);_gaq.push(["_trackPageview"]);(function(){var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)})();</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8EQ66D87ZZ" /><script>
                  window.dataLayer = window.dataLayer || [];
                  function gtag(){dataLayer.push(arguments);}
                  gtag('js', new Date());

                  gtag('config', 'G-8EQ66D87ZZ');
                </script></head><body onload="prettyPrint()"><div id="all">
<div class="slide cover"><div class="content"><div class="course">Базы данных</div><hr /><div class="lecture"><div>Распределённые базы данных</div></div><div class="link"><a href="https://kgeorgiy.info/courses/dbms/">https://kgeorgiy.info/courses/dbms/</a></div><div class="copyright"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.ru"><span class="copyright">Copyright © Георгий Корнеев</span><img src="scripts/by-nc-sa.png" alt="Attribution-NonCommercial-ShareAlike" /></a></div></div></div>
<div class="slide section"><div class="content"><h1>Секционирование (partitioning)</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc current">Секционирование (partitioning)</a><ol class="level-2 toc-2"><li><a href="#(3)" class="">Типы секционирования</a></li><li><a href="#(9)" class="">Методы секционирования</a></li><li><a href="#(16)" class="">Управление секциями</a></li></ol></li><li><a href="#(21)" class="toc">Репликация</a></li><li><a href="#(35)" class="toc">Распределённые базы данных</a></li><li><a href="#(60)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">2</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Типы секционирования</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc current">Секционирование (partitioning)</a><ol class="level-2 toc-2"><li><a href="#(3)" class=" current">Типы секционирования</a></li><li><a href="#(9)" class="">Методы секционирования</a></li><li><a href="#(16)" class="">Управление секциями</a></li></ol></li><li><a href="#(21)" class="toc">Репликация</a></li><li><a href="#(35)" class="toc">Распределённые базы данных</a></li><li><a href="#(60)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">3</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Секционирование</h1><div class="body"><ul class="item-1 level-1"><li>Разбиение таблицы на фрагменты<ul class="item-2 level-2"><li>Хранятся в разных местах</li><li>Возможно, на разных компьютерах (шардинг)</li><li>Уменьшение числа чтений</li></ul></li><li>Типы секционирования<ul class="item-2 level-2"><li>Вертикальное</li><li>Горизонтальное</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">4</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Вертикальное секционирование</h1><div class="body"><ul class="item-1 level-1"><li>Разрезание «по столбцам»<ul class="item-2 level-2"><li>Проекция/соединение</li></ul></li><li>Преимущества<ul class="item-2 level-2"><li>Отделение «частых» данных от «редких»</li><li>Защита информации</li><li>Автоматическая поддержка для <var>CLOB</var> и <var>BLOB</var></li></ul></li><li>Недостатки<ul class="item-2 level-2"><li>Нет специальной поддержки</li><li>Зависимость от представления</li><li>Необходимость обновляемых представлений</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">5</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Пример вертикального секцион.</h1><div class="body"><ul class="item-1 level-1"><li>Исходная таблица<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">Students(SId, GId, FirstName, LastName,
    PassSeries, PassNo, PassIssued, Photo)
</pre></li></ul></li><li>Секции таблицы<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">StudentDatum(SId, GId, FirstName, LastName)
</pre></li><li><pre class="prettyprint lang-sql">StudentPasses(SId, PassNo, Issued)
</pre></li><li><pre class="prettyprint lang-sql">StudentPhotos(SId, Photo)
</pre></li><li><pre class="prettyprint lang-sql">create view Students as StudentDatum
    natural join StudentPasses natural join StudenPhotos
</pre></li></ul></li><li>Права доступа<ul class="item-2 level-2"><li><var>StudentDatum</var>, <var>StudentPhotos</var> — все</li><li><var>StudentPasses</var> — деканат</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">6</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Горизонтальное секционирование</h1><div class="body"><ul class="item-1 level-1"><li>Разрезание «по строкам»<ul class="item-2 level-2"><li>Фильтрация/объединение</li></ul></li><li>Преимущества<ul class="item-2 level-2"><li>Отделение «близких» данных от «дальних»</li><li>Уменьшение размера секции</li><li>Встроенная поддержка</li><li>Прозрачность для пользователя</li></ul></li><li>Недостатки<ul class="item-2 level-2"><li>Возможное замедление работы</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">7</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Пример горизонтального секцион.</h1><div class="body"><ul class="item-1 level-1"><li>Исходная таблица<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">Points(SId, CId, Points, Date)
</pre></li></ul></li><li>Секции по <var>Date</var><ul class="item-2 level-2"><li><var><span class="mathO"><span class="math">$Points_{2024-2}$</span></span></var> — оценки за осенний семестр 2024</li><li><var><span class="mathO"><span class="math">$Points_{2024-1}$</span></span></var> — оценки за весенний семестр 2024</li><li><var><span class="mathO"><span class="math">$Points_{2023-1}$</span></span></var> — оценки за весенний семестр 2023</li><li>...</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">8</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Методы секционирования</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc current">Секционирование (partitioning)</a><ol class="level-2 toc-2"><li><a href="#(3)" class="">Типы секционирования</a></li><li><a href="#(9)" class=" current">Методы секционирования</a></li><li><a href="#(16)" class="">Управление секциями</a></li></ol></li><li><a href="#(21)" class="toc">Репликация</a></li><li><a href="#(35)" class="toc">Распределённые базы данных</a></li><li><a href="#(60)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">9</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Методы секционирования</h1><div class="body"><ul class="item-1 level-1"><li>Простые<ul class="item-2 level-2"><li>По диапазонам</li><li>По значениям</li><li>По хэшу</li></ul></li><li>По выражению</li><li>Составные<ul class="item-2 level-2"><li>По диапазону и хэшу</li><li>...</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">10</span></div></div></div></div>
<div class="slide"><div class="content"><h1>По диапазонам</h1><div class="body"><ul class="item-1 level-1"><li>Секция содержит значения из диапазона<ul class="item-2 level-2"><li>Задаются границами</li></ul></li><li>Пример<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">create table Points (...)
partition by range(Date) (
    partition pHist   values less than '2024-02-01',
    partition p2024s1 values less than '2024-07-01',
    partition p2024s2 values less than '2025-02-01',
    partition pFuture values less than maxvalue
);
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">11</span></div></div></div></div>
<div class="slide"><div class="content"><h1>По значениям</h1><div class="body"><ul class="item-1 level-1"><li>Секция содержит значения из списка<ul class="item-2 level-2"><li>Задаются списками значений</li></ul></li><li>Пример<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">create table Points (...)
partition by list(Term) (
    partition pHist       values in ('t2023-1', 't2023-2', ...),
    partition p2024s1 values in ('t2024-1'),
    partition p2024s2 values in ('t2024-2'),
    partition pFuture   values in ('t2025-1')
)
</pre></li></ul></li><li><span class="warn">Секция может быть не определена</span><ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">insert into Points (Term) values ('t2001-1');
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">12</span></div></div></div></div>
<div class="slide"><div class="content"><h1>По хэшу</h1><div class="body"><ul class="item-1 level-1"><li>Разбиение на несколько корзин<ul class="item-2 level-2"><li>Хэшируется набор столбцов</li></ul></li><li>Пример<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">create table Points (...)
partition by hash(Term)
partitions 4;
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">13</span></div></div></div></div>
<div class="slide"><div class="content"><h1>По выражению</h1><div class="body"><ul class="item-1 level-1"><li>На секции разбиваются значение выражения<ul class="item-2 level-2"><li>Любой метод простого секционирования</li></ul></li><li>Пример<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">create table Points (...)
partition by year(Date) (
    partition pHist values less than 2024,
    partition pCurrent values less than 2025,
    partition pFuture values less than maxvalue
)
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">14</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Составное секционирование</h1><div class="body"><ul class="item-1 level-1"><li>Секции разбиваются на подсекции<ul class="item-2 level-2"><li>Возможно, по разным атрибутам</li></ul></li><li>Пример<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">create table Points (...)
partition by year(Date)
subpartition by hash(Term) (
    partition History values less than 2024 (
        subpartition History1, subpartition History2
    ),
    partition Current values less than 2025 (
        subpartition Current1, subpartition Current2
    )
)
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">15</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Управление секциями</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc current">Секционирование (partitioning)</a><ol class="level-2 toc-2"><li><a href="#(3)" class="">Типы секционирования</a></li><li><a href="#(9)" class="">Методы секционирования</a></li><li><a href="#(16)" class=" current">Управление секциями</a></li></ol></li><li><a href="#(21)" class="toc">Репликация</a></li><li><a href="#(35)" class="toc">Распределённые базы данных</a></li><li><a href="#(60)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">16</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Изменение состава секций</h1><div class="body"><ul class="item-1 level-1"><li>Удаление секции<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">alter table таблица drop partition секция;
</pre></li></ul></li><li>Разбиение секции<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">alter table таблица reorganize секция into (...);
</pre></li></ul></li><li>Перехэширование<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">alter table таблица add partition число;
</pre></li><li><pre class="prettyprint lang-sql">alter table таблица coalesce partition число;
</pre></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">17</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Отбрасывание секций</h1><div class="body"><ul class="item-1 level-1"><li>Оптимизатор «знает» о секциях<ul class="item-2 level-2"><li>Где какие данные находятся</li><li><var><span class="mathO"><span class="math">$=$</span></span></var>, <var>in</var>, <var>between</var>, сравнения</li></ul></li><li>Пример<ul class="item-2 level-2"><li><pre class="prettyprint lang-sql">select * from Points where Date = '2024-12-23'
</pre></li><li>Будет использована секция только 2024 года</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">18</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Секционирование и индексы</h1><div class="body"><ul class="item-1 level-1"><li>Типы индексов<ul class="item-2 level-2"><li>Локальный индекс — один на секцию</li><li>Глобальный индекс — один на таблицу</li><li>Секционированный индекс — разбит на секции по‑своему</li></ul></li><li>Локальный и глобальный индексы<ul class="item-2 level-2"><li>Ускорение при отбрасывании секций</li></ul></li><li>Секционированный индекс<ul class="item-2 level-2"><li>Согласованное секционирование</li><li>Среднее между глобальным и локальным</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">19</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Секционирование и ключи</h1><div class="body"><ul class="item-1 level-1"><li>Определение секции по ключу<ul class="item-2 level-2"><li>Секционируемые столбцы — подключ</li><li>Подключ всех ключей</li></ul></li><li>Операции над значениями<ul class="item-2 level-2"><li>«Склейка» значений — разрешена</li><li>«Разбиение» значений — нежелательно</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">20</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Репликация</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Секционирование (partitioning)</a></li><li><a href="#(21)" class="toc current">Репликация</a><ol class="level-2 toc-2"><li><a href="#(23)" class="">Реализация репликации</a></li><li><a href="#(29)" class="">Применения</a></li></ol></li><li><a href="#(35)" class="toc">Распределённые базы данных</a></li><li><a href="#(60)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">21</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Репликация</h1><div class="body"><ul class="item-1 level-1"><li>Поддержание одинаковых данных на нескольких узлах</li><li>Типы репликации<ul class="item-2 level-2"><li>Синхронная (распределённые транзакции)</li><li>Асинхронная</li></ul></li><li>Схемы репликации<ul class="item-2 level-2"><li>С основной копией</li><li>Симметричная</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">22</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Реализация репликации</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Секционирование (partitioning)</a></li><li><a href="#(21)" class="toc current">Репликация</a><ol class="level-2 toc-2"><li><a href="#(23)" class=" current">Реализация репликации</a></li><li><a href="#(29)" class="">Применения</a></li></ol></li><li><a href="#(35)" class="toc">Распределённые базы данных</a></li><li><a href="#(60)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">23</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Репликация с основной копией</h1><div class="body"><ul class="item-1 level-1"><li>Согласованные изменения</li><li>Постоянное подключение </li></ul><div class="img-width"><img class="width" style="width: 80%" src="pics/Replication_Master.png" /></div></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">24</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Симметричная репликация</h1><div class="body"><ul class="item-1 level-1"><li>Противоречивые изменения</li><li>Автономная работа </li></ul><div class="img-width"><img class="width" style="width: 80%" src="pics/Replication_Symmetric.png" /></div></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">25</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Реализация репликации</h1><div class="body"><ul class="item-1 level-1"><li><span class="question">Где есть все данные об изменениях?</span><ul class="item-2 level-2"><li class="incremental"><div class="non-incremental">Протокол транзакций</div></li></ul></li><li class="incremental"><div class="non-incremental">Рассылка протоколов транзакций</div></li><li class="incremental"><div class="non-incremental">Гранулярность<ul class="item-2 level-2"><li>Операторы</li><li>Записи</li></ul></div></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">26</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Репликация операторов</h1><div class="body"><ul class="item-1 level-1"><li>На реплике выполняются те же операторы</li><li>Преимущества<ul class="item-2 level-2"><li>Мало данных</li></ul></li><li>Недостатки<ul class="item-2 level-2"><li>Операторы должны быть детерминированы</li><li>Необходимо учитывать взаимный порядок выполнения транзакций</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">27</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Репликация записей</h1><div class="body"><ul class="item-1 level-1"><li>Пересылается информация об изменении записей</li><li>Преимущества<ul class="item-2 level-2"><li>Детерминированность</li></ul></li><li>Недостатки<ul class="item-2 level-2"><li>Большой объём данных</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">28</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Применения</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Секционирование (partitioning)</a></li><li><a href="#(21)" class="toc current">Репликация</a><ol class="level-2 toc-2"><li><a href="#(23)" class="">Реализация репликации</a></li><li><a href="#(29)" class=" current">Применения</a></li></ol></li><li><a href="#(35)" class="toc">Распределённые базы данных</a></li><li><a href="#(60)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">29</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Применения репликации</h1><div class="body"><ul class="item-1 level-1"><li>Вертикальное масштабирование</li><li>Горизонтальное масштабирование</li><li>Повышение доступности</li><li>Резервное копирование</li><li>Преобразование данных</li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">30</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Вертикальное масштабирование</h1><div class="body"><ul class="item-1 level-1"><li>Асимметричная схема<ul class="item-2 level-2"><li>Большое количество чтений</li><li>Малое количество записей</li></ul></li><li>Применение<ul class="item-2 level-2"><li>Web-сервера</li><li>ERP-системы</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">31</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Горизонтальное масштабирование</h1><div class="body"><ul class="item-1 level-1"><li>Симметричная схема<ul class="item-2 level-2"><li>Большое количество локальных операций</li><li>Периодическая синхронизация</li></ul></li><li>Применение<ul class="item-2 level-2"><li>Географическая распределённость</li><li>Независимость по данным</li><li>Непостоянная связь</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">32</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Повышение доступности</h1><div class="body"><ul class="item-1 level-1"><li>Асимметричная схема</li><li>Резервное копирование<ul class="item-2 level-2"><li>Постоянная синхронизация</li><li>Резервное копирование с остановкой реплики</li></ul></li><li>Доступность данных<ul class="item-2 level-2"><li>Назначение новой основной копии</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">33</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Преобразование данных</h1><div class="body"><ul class="item-1 level-1"><li>Асимметричная схема<ul class="item-2 level-2"><li>Периодическая синхронизация</li><li>При репликации данные преобразуются</li></ul></li><li>Применение<ul class="item-2 level-2"><li>Изменение формата хранения</li><li>Консолидация данных</li><li>Унификация данных</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">34</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Распределённые базы данных</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Секционирование (partitioning)</a></li><li><a href="#(21)" class="toc">Репликация</a></li><li><a href="#(35)" class="toc current">Распределённые базы данных</a><ol class="level-2 toc-2"><li><a href="#(36)" class="">Цели распределения</a></li><li><a href="#(41)" class="">Распределённые транзакции</a></li><li><a href="#(50)" class="">Проблемы распределённых баз данных</a></li></ol></li><li><a href="#(60)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">35</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Цели распределения</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Секционирование (partitioning)</a></li><li><a href="#(21)" class="toc">Репликация</a></li><li><a href="#(35)" class="toc current">Распределённые базы данных</a><ol class="level-2 toc-2"><li><a href="#(36)" class=" current">Цели распределения</a></li><li><a href="#(41)" class="">Распределённые транзакции</a></li><li><a href="#(50)" class="">Проблемы распределённых баз данных</a></li></ol></li><li><a href="#(60)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">36</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Децентрализация</h1><div class="body"><ul class="item-1 level-1"><li>Локальная независимость<ul class="item-2 level-2"><li>Узел должен функционировать даже в изоляции</li></ul></li><li>Отсутствие центрального узла<ul class="item-2 level-2"><li>Нет «уязвимого места»</li></ul></li><li>Непрерывное функционирование<ul class="item-2 level-2"><li>Надежность</li><li>Доступность</li></ul></li><li>⇒ Равноправие узлов<ul class="item-2 level-2"><li>Выборы временного координатора</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">37</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Прозрачность</h1><div class="body"><ul class="item-1 level-1"><li>Независимость от расположения<ul class="item-2 level-2"><li>Программы могут работать на любом узле</li><li>Удаленный доступ к данным</li></ul></li><li>Независимость от фрагментации<ul class="item-2 level-2"><li>Программы не знают на каком узле находятся данные</li><li>Унифицированный доступ к данным</li><li>Географическое секционирование</li></ul></li><li>Независимость от репликации<ul class="item-2 level-2"><li>Автоматическая поддержка репликации</li><li>Выбор узла для обновления</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">38</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Распределённые транзакции</h1><div class="body"><ul class="item-1 level-1"><li>Поддержка распределённых запросов<ul class="item-2 level-2"><li>Один запрос получает данные с разных узлов</li><li>Удалённый доступ к данным</li></ul></li><li>Распределённые транзакции<ul class="item-2 level-2"><li>Несколько узлов участвуют в единой транзакции</li><li>Согласованность фиксации и отката</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">39</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Независимость от окружения</h1><div class="body"><ul class="item-1 level-1"><li>Независимость аппаратуры<ul class="item-2 level-2"><li>Write once, run anywhere</li><li>Унифицированное представление данных</li></ul></li><li>Независимость от ОС<ul class="item-2 level-2"><li>Прозрачная поддержка различных ОС</li><li>Конвертация данных</li></ul></li><li>Независимость от сети<ul class="item-2 level-2"><li>Прозрачная поддержка различных сетей</li></ul></li><li>Независимость от типа СУБД<ul class="item-2 level-2"><li>Прозрачная поддержка различных СУБД</li><li>Конвертация данных</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">40</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Распределённые транзакции</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Секционирование (partitioning)</a></li><li><a href="#(21)" class="toc">Репликация</a></li><li><a href="#(35)" class="toc current">Распределённые базы данных</a><ol class="level-2 toc-2"><li><a href="#(36)" class="">Цели распределения</a></li><li><a href="#(41)" class=" current">Распределённые транзакции</a></li><li><a href="#(50)" class="">Проблемы распределённых баз данных</a></li></ol></li><li><a href="#(60)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">41</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Распределённые транзакции</h1><div class="body"><ul class="item-1 level-1"><li>В транзакции участвует несколько узлов<ul class="item-2 level-2"><li>Либо на всех зафиксирована</li><li>Либо на всех откачена</li></ul></li><li>Сбои<ul class="item-2 level-2"><li>Участников</li><li>Коммуникаций</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">42</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Двухфазная фиксация </h1><div class="body"><img class="bottom" src="pics/Distributed_TwoPhase.png" /></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">43</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Задача двух генералов (1)</h1><div class="body"><ul class="item-1 level-1"><li>Одновременная атака ⇒ победа</li><li>Одиночная атака ⇒ поражение</li><li>Обмен сообщений<ul class="item-2 level-2"><li>Посыльные</li><li>Могут убить <img class="bottom" src="pics/Distributed_TwoGenerals.png" /></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">44</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Задача двух генералов (2)</h1><div class="body"><ul class="item-1 level-1"><li>Вероятностное решение<ul class="item-2 level-2"><li>Послать гонца со временем</li><li>Ждать подтверждение</li><li>При необходимости повторить</li></ul></li><li>Отсутствие гарантированного решения</li><li>Доказательство<ul class="item-2 level-2"><li>Пусть существует конечный протокол<ul class="item-3 level-3"><li>⇒ минимальное по включению множество сообщений</li></ul></li><li>Пусть последнее сообщение не доставлено<ul class="item-3 level-3"><li>⇒ принять решение нельзя</li></ul></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">45</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Обработка сбоев координатора</h1><div class="body"><ul class="item-1 level-1"><li>До принятия решения<ul class="item-2 level-2"><li>Откат</li></ul></li><li>Принятие решение<ul class="item-2 level-2"><li>Запись в протокол транзакций</li></ul></li><li>После принятия решения<ul class="item-2 level-2"><li>Выполнение решения</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">46</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Обработка сбоев участников</h1><div class="body"><ul class="item-1 level-1"><li>До получения решения<ul class="item-2 level-2"><li>Запросить у координатора</li></ul></li><li>Получение решения<ul class="item-2 level-2"><li>Запись в протокол транзакций</li></ul></li><li>После получения решения<ul class="item-2 level-2"><li>Выполнение решения</li><li>Отсылка подтверждения</li><li>Запись в протокол транзакций</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">47</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Улучшение протокола</h1><div class="body"><ul class="item-1 level-1"><li><span class="question">Когда требуется помнить решение</span>?<ul class="item-2 level-2"><li class="incremental"><div class="non-incremental">Между принятием и подтверждениями</div></li></ul></li><li class="incremental"><div class="non-incremental">Протокол предполагаемой фиксации<ul class="item-2 level-2"><li>При решении «фиксировать» — «забыть» транзакцию</li><li>Неизвестная транзакция — фиксировать</li></ul></div></li><li class="incremental"><div class="non-incremental">Протокол предполагаемого отката<ul class="item-2 level-2"><li>При решении «откатить» — «забыть» транзакцию</li><li>Неизвестная транзакция — откатить</li></ul></div></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">48</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Ложная фиксация</h1><div class="body"><ul class="item-1 level-1"><li>Протокол предполагаемой фиксации</li><li>Сбой на первой фазе<ul class="item-2 level-2"><li>«Потеря» транзакции</li><li>Ответы «фиксировать»</li></ul></li><li>Хранение всех участников транзакции</li><li>Протокол предполагаемого отката<ul class="item-2 level-2"><li>Проблемы нет</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">49</span></div></div></div></div>
<div class="slide subsection"><div class="content"><h1>Проблемы распределённых баз данных</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Секционирование (partitioning)</a></li><li><a href="#(21)" class="toc">Репликация</a></li><li><a href="#(35)" class="toc current">Распределённые базы данных</a><ol class="level-2 toc-2"><li><a href="#(36)" class="">Цели распределения</a></li><li><a href="#(41)" class="">Распределённые транзакции</a></li><li><a href="#(50)" class=" current">Проблемы распределённых баз данных</a></li></ol></li><li><a href="#(60)" class="toc">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">50</span></div></div></div></div>
<div class="slide"><div class="content"><h1>CAP-теорема</h1><div class="body"><ul class="item-1 level-1"><li>Два свойства из трех<ul class="item-2 level-2"><li><var>Consistency</var> — информация на разных узлах согласована</li><li><var>Availability</var> — система отвечает на запросы</li><li><var>Partition tolerance</var> — связи между узлами могут обрываться</li></ul></li><li>Свойства не бинарные<ul class="item-2 level-2"><li>Доказательство верно только для бинарных свойств</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">51</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Partition tolerance</h1><div class="body"><ul class="item-1 level-1"><li>В случае обрыва связи<ul class="item-2 level-2"><li>Частичный отказ от <var>Availability</var> ⇒ функционирует одна часть системы</li><li>Частичный отказ от <var>Consistency</var> ⇒ необходимость объединения состояний</li></ul></li><li>Система не разделена<ul class="item-2 level-2"><li>Полные <var>Availability</var> и <var>Consistency</var></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">52</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Подход BASE</h1><div class="body"><ul class="item-1 level-1"><li>Ослабление свойств<ul class="item-2 level-2"><li><var>Basically Available</var> — сбой узла приводит к отказу только для части пользователей</li><li><var>Soft-state</var> — изменение состояния без внешнего вмешательства</li><li><var>Eventual Consistency</var> — вре́менная несогласованность</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">53</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Разрешение несогласованности</h1><div class="body"><ul class="item-1 level-1"><li>По времени<ul class="item-2 level-2"><li>При чтении ⇒ замедляется чтение</li><li>При записи ⇒ замедляется запись</li><li>Асинхронная ⇒ требуется специальный процесс</li></ul></li><li>Выбор варианта<ul class="item-2 level-2"><li>Метки времени</li><li>Векторные часы</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">54</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Оптимизация запросов</h1><div class="body"><ul class="item-1 level-1"><li>Цели оптимизации<ul class="item-2 level-2"><li>Минимизировать время выполнения</li><li>Минимизировать количество данных</li><li>Минимизировать количество коммуникаций</li></ul></li><li>Средства оптимизации<ul class="item-2 level-2"><li>Выбор узлов получения и обработки данных</li><li>Полусоединения</li><li>Применение репликации</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">55</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Управление параллельностью</h1><div class="body"><ul class="item-1 level-1"><li>Цели управления<ul class="item-2 level-2"><li>Распараллеливание запроса</li><li>Изоляция транзакций</li><li>Детектирование распределённых взаимных блокировок</li></ul></li><li>Средства управления<ul class="item-2 level-2"><li>Распределённые транзакции</li><li>Распределённые блокировки</li><li>Стратегия основной копии</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">56</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Управление каталогом</h1><div class="body"><ul class="item-1 level-1"><li>Цели<ul class="item-2 level-2"><li>Независимость от расположения</li><li>Независимость от фрагментации</li><li>Возможность переноса данных</li></ul></li><li>Методы<ul class="item-2 level-2"><li>Централизованное хранение</li><li>Полная репликация</li><li>Локальное секционирование</li><li>Секционирование + репликация</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">57</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Независимость от окружения </h1><div class="body"><div class="img-width"><img class="width" style="width: 80%" src="pics/Distributed_Gateway.png" /></div></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">58</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Задачи шлюза</h1><div class="body"><ul class="item-1 level-1"><li>Реализация протоколов<ul class="item-2 level-2"><li>Семантическое взаимодействие</li></ul></li><li>Конвертация<ul class="item-2 level-2"><li>Данных</li><li>Запросов</li><li>Каталога</li></ul></li><li>Поддержка<ul class="item-2 level-2"><li>Распределённых транзакций</li><li>Блокировок</li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">59</span></div></div></div></div>
<div class="slide section"><div class="content"><h1>Литература</h1><h2>Содержание</h2><div class="body"><ol class="level-1 toc-1"><li><a href="#(2)" class="toc">Секционирование (partitioning)</a></li><li><a href="#(21)" class="toc">Репликация</a></li><li><a href="#(35)" class="toc">Распределённые базы данных</a></li><li><a href="#(60)" class="toc current">Литература</a></li></ol></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">60</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Основная литература</h1><div class="body"><ul class="item-1 level-1"><li><em>Дейт К.</em> Введение в системы баз данных (глава 18)</li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">61</span></div></div></div></div>
<div class="slide"><div class="content"><h1>Дополнительная литература</h1><div class="body"><ul class="item-1 level-1"><li>PostgreSQL Documentation<ul class="item-2 level-2"><li><a href="https://www.postgresql.org/docs/current/ddl-partitioning.html" target="_blank">Table Partitioning</a></li><li><a href="https://www.postgresql.org/docs/current/high-availability.html" target="_blank">High Availability, Load Balancing, and Replication</a></li></ul></li><li><em>MySQL Reference Manual</em><ul class="item-2 level-2"><li><a href="https://dev.mysql.com/doc/refman/8.0/en/partitioning.html" target="_blank">Partitioning</a></li><li><a href="http://dev.mysql.com/doc/refman/8.0/en/replication.html" target="_blank">Replication</a></li></ul></li></ul></div><div class="footer"><div class="test"><span class="author">Георгий Корнеев</span><span class="title">Базы данных / Распределённые базы данных</span><span class="number">62</span></div></div></div></div></div></body></html>